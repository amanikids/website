%h1 Page
- form_for [:admin, @page], :html => { :multipart => true } do |f|
  = f.error_messages
  .field
    = f.label :parent_id
    = f.select :parent_id, Section.ordered.inject([]) { |options, section| options << [section.title, section.id]; section.children.each { |child| options << ['- ' + child.title, child.id] }; options }
  .field
    = f.label :title
    = f.text_field :title
  .field
    = f.label :slug
    = f.text_field :slug
  .field
    = f.label :body
    = textile_area :page, :body
  .field
    = f.label :photo
    = f.file_field :photo
    = image_tag @page.photo.url(:small)
  .field
    = f.submit 'Save changes', :name => 'page[continue_editing]'
    or
    = link_to 'Cancel', admin_sections_path
